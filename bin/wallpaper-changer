#!/usr/bin/env bash

WALLPAPER_DIR="$HOME/pics/backgrounds"

if [[ "$HOSTNAME" == "$DESKTOP" ]]; then
    ROFI_CONFIG="$HOME/.config/rofi/wallpaper.rasi"
elif [[ "$HOSTNAME" == "$LAPTOP" ]]; then
    ROFI_CONFIG="$HOME/.config/rofi/wallpaper-laptop.rasi"
else
    echo "Hostname not found."
fi

WALLPAPER=$(for a in "$WALLPAPER_DIR"/*; do echo -en "${a##*/}\0icon\x1f$a\n"; done | rofi -dmenu -i -config "$ROFI_CONFIG")

if [[ -n "$WALLPAPER" ]]; then
    echo "$WALLPAPER_DIR/$WALLPAPER"
    hyprctl hyprpaper reload , "$WALLPAPER_DIR/$WALLPAPER"
    hyprctl hyprpaper unload unused
fi
